(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{452:function(n,r,e){"use strict";e.r(r);var t=e(8),a=Object(t.a)({},(function(){var n=this,r=n.$createElement,e=n._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("p",[n._v("单点登录有效减少繁琐的登录操作，优化了用户体验")]),n._v(" "),e("h2",{attrs:{id:"单点登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#单点登录"}},[n._v("#")]),n._v(" 单点登录")]),n._v(" "),e("p",[n._v("单点登录主要功能在后端，这里只讲述使用 "),e("code",[n._v("ronna-admin")]),n._v(" 前端代码如何实现"),e("br"),n._v("\n下面以完整版为例，精简版想要开启单点登录只需将 "),e("a",{attrs:{href:"https://github.com/ronnaces/ronna-admin/blob/main/src/router/index.ts#L1",target:"_blank",rel:"noopener noreferrer"}},[n._v('import "@/utils/sso"'),e("OutboundLink")],1),n._v(" 注释解开即可")]),n._v(" "),e("h3",{attrs:{id:"前端实现步骤划分"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端实现步骤划分"}},[n._v("#")]),n._v(" 前端实现步骤划分")]),n._v(" "),e("ul",[e("li",[n._v("先判断是否为单点登录，不为则直接返回不再进行任何逻辑处理，下面是单点登录的处理步骤")])]),n._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://github.com/ronnaces/ronna-admin/blob/main/src/utils/sso.ts#L37",target:"_blank",rel:"noopener noreferrer"}},[n._v("清空本地旧信息"),e("OutboundLink")],1)]),n._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/ronnaces/ronna-admin/blob/main/src/utils/sso.ts#L40",target:"_blank",rel:"noopener noreferrer"}},[n._v(" 获取 "),e("code",[n._v("url")]),n._v(" 中的重要参数信息，然后通过 "),e("code",[n._v("setToken")]),n._v(" 保存在本地"),e("OutboundLink")],1)]),n._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/ronnaces/ronna-admin/blob/main/src/utils/sso.ts#L43-L44",target:"_blank",rel:"noopener noreferrer"}},[n._v("删除不需要显示在 "),e("code",[n._v("url")]),n._v(" 的参数，这样做更安全"),e("OutboundLink")],1)]),n._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/ronnaces/ronna-admin/blob/main/src/utils/sso.ts#L55",target:"_blank",rel:"noopener noreferrer"}},[n._v("使用 "),e("code",[n._v("window.location.replace")]),n._v(" 跳转正确页面，"),e("code",[n._v("window.location.replace")]),n._v(" 可以替换浏览器历史记录项"),e("OutboundLink")],1)])]),n._v(" "),e("h3",{attrs:{id:"完整代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#完整代码"}},[n._v("#")]),n._v(" 完整代码")]),n._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/ronnaces/ronna-admin/blob/main/src/utils/sso.ts",target:"_blank",rel:"noopener noreferrer"}},[n._v("点击查看完整代码"),e("OutboundLink")],1)]),n._v(" "),e("h3",{attrs:{id:"url-格式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#url-格式"}},[n._v("#")]),n._v(" url 格式")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("以平台的预览地址为例\n\n完整地址 https://admin.ronnaces.com/#/welcome?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin\n\nhttps://admin.ronnaces.com  域名\n\n/#/welcome  要跳转的页面（这里是hash路由模式，根据实际情况修改即可）\n\n?username=sso&roles=admin&accessToken=eyJhbGciOiJIUzUxMiJ9.admin  需要携带的三个（username、roles、accessToken）必传参数\n")])])])])}),[],!1,null,null,null);r.default=a.exports}}]);